<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <!-- Wallet Name Updated -->
    <title>AB Wallet Pro+</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script defer src="firebase.js"></script>
</head>
<body>

    <div id="app-container">
        <div id="loading-overlay"><div class="spinner"></div><p>Loading AB Wallet...</p></div>

        <main id="main-content">
            <!-- Home Page (No major changes here) -->
            <div id="home-page" class="page active">
                 <header class="page-header">
                    <h1>Portfolio</h1>
                    <button id="refresh-button" title="Refresh Data">üîÑ</button>
                </header>
                 <section class="content-section total-balance-section">
                    <!-- ... Total Balance card ... -->
                 </section>
                 <section class="content-section asset-list-section">
                     <h2>Your Assets</h2>
                     <div id="asset-list" class="asset-list-container">
                         <p class="no-assets">Loading assets...</p>
                     </div>
                 </section>
                <section class="content-section user-info-section">
                    <!-- ... User Info card ... -->
                </section>
            </div>

            <!-- Swap Page (No major HTML changes, logic updated in JS) -->
            <div id="swap-page" class="page">
                 <header class="page-header">
                    <button class="back-button" data-target="home-page">‚Üê</button>
                    <h1>Swap Assets</h1>
                 </header>
                 <section class="content-section swap-section">
                     <!-- ... Swap Interface structure remains the same ... -->
                      <div class="swap-interface">
                         <!-- From Section -->
                         <div class="swap-box">
                             <label for="swap-from-amount">From</label>
                             <!-- ... input group ... -->
                             <div class="balance-info" id="swap-from-balance">Balance: 0.0</div>
                         </div>
                         <div class="swap-icon-container">
                              <button id="swap-switch-button" title="Switch Tokens">‚áÖ</button>
                         </div>
                         <!-- To Section -->
                         <div class="swap-box">
                             <label for="swap-to-amount">To (Estimated)</label>
                              <!-- ... input group ... -->
                              <div class="balance-info" id="swap-to-balance">Balance: 0.0</div>
                         </div>
                         <!-- Rate & Action -->
                         <div class="swap-rate-info" id="swap-rate-display">Select tokens to see rate.</div>
                         <p class="fee-info" id="swap-fee-info">A 0.1% fee applies to swaps.</p> <!-- Added fee info -->
                         <button id="execute-swap-button" class="action-button primary-button" disabled>Swap</button>
                         <p id="swap-status" class="status-message"></p>
                     </div>
                 </section>
            </div>

            <!-- Deposit Page (Simplified for Internal Transfers) -->
            <div id="deposit-page" class="page">
                <header class="page-header">
                     <button class="back-button" data-target="home-page">‚Üê</button>
                     <h1>Receive Funds</h1> <!-- Changed Title -->
                </header>
                <section class="content-section">
                    <!-- Updated Explanation -->
                    <p class="info-text">To receive funds within AB Wallet, another user needs to send assets directly to your Chat ID.</p>
                    <p class="info-text">Share your Chat ID below with the sender.</p>

                    <div class="deposit-info-card">
                        <h3>Your Account Identifier (Chat ID)</h3>
                        <div class="chat-id-display">
                           <span id="deposit-chat-id">Loading...</span>
                           <button class="copy-button" title="Copy Chat ID" data-clipboard-target="#deposit-chat-id">COPY</button>
                        </div>
                         <p class="small-text">This ID identifies your AB Wallet account for internal transfers.</p>
                    </div>

                    <!-- Removed the External Wallet Address Section -->

                     <p class="info-text" style="margin-top: 20px;">Received funds will appear in your balance automatically once the sender completes the transfer.</p>
                </section>
            </div>

            <!-- Withdraw Page (Changed to Internal Transfer) -->
            <div id="withdraw-page" class="page">
                <header class="page-header">
                    <button class="back-button" data-target="home-page">‚Üê</button>
                     <!-- Changed Title -->
                    <h1>Send Funds</h1>
                </header>
                 <section class="content-section">
                     <div class="form-group">
                         <label for="withdraw-asset-select">Select Asset to Send:</label>
                         <select id="withdraw-asset-select">
                             <option value="">-- Select Asset --</option>
                         </select>
                         <p class="current-balance-info">Available: <strong id="withdraw-available-balance">0.00</strong></p>
                     </div>
                    <div class="form-group">
                        <!-- Changed Label/Placeholder -->
                        <label for="withdraw-recipient-id">Recipient's Chat ID:</label>
                        <input type="number" id="withdraw-recipient-id" placeholder="Enter the recipient's Telegram Chat ID">
                         <!-- Updated Note -->
                         <p class="small-text info-text"><small>Enter the exact Chat ID of the AB Wallet user you want to send funds to. Double-check the ID.</small></p>
                    </div>
                    <div class="form-group">
                        <label for="withdraw-amount">Amount to Send:</label>
                        <div class="input-with-button">
                            <input type="number" id="withdraw-amount" placeholder="0.00" step="any" min="0">
                            <button id="withdraw-max-button">Max</button>
                        </div>
                    </div>
                     <!-- Changed Button Text -->
                    <button id="send-button" class="action-button primary-button" disabled>Send Funds</button>
                    <p id="withdraw-status" class="status-message"></p> <!-- ID remains withdraw-status for now -->
                 </section>
            </div>
        </main>

        <!-- Bottom Navigation Bar (No Changes) -->
        <nav id="bottom-nav">
            <!-- ... buttons ... -->
        </nav>

         <!-- Token Selector Modal (No Changes) -->
         <div id="token-selector-modal" class="modal">
             <!-- ... modal content ... -->
         </div>
    </div>

    <!-- Clipboard JS (No Changes) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <script> /* ... Clipboard init ... */ </script>

</body>
</html>
