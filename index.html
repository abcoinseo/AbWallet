<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AB Wallet</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script defer src="firebase.js"></script>
</head>
<body class="dark-theme">

    <div id="app-container">
        <!-- Loading Overlay -->
        <div id="loading-overlay">
            <div class="spinner"></div>
            <p>Loading AB Wallet...</p>
        </div>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Home Page -->
            <div id="home-page" class="page active">
                <header class="page-header">
                    <h1>Portfolio</h1>
                    <button id="refresh-button" class="icon-button" title="Refresh Data" aria-label="Refresh Data">
                        <span class="material-icons-outlined">refresh</span>
                    </button>
                </header>
                 <section class="content-section total-balance-section">
                    <h2>Total Estimated Value</h2>
                    <div class="total-balance-card card">
                        <span class="currency-symbol">$</span>
                        <span class="balance-amount" id="total-balance-display">0.00</span>
                        <span class="currency-code">USD</span>
                    </div>
                 </section>
                 <section class="content-section asset-list-section">
                     <h2>Your Assets</h2>
                     <div id="asset-list" class="asset-list-container">
                         <p class="no-assets placeholder-text">Loading assets...</p>
                         <!-- Asset cards injected here -->
                     </div>
                 </section>

                 <!-- NEW: Recent Transactions Section -->
                 <section class="content-section transaction-history-section">
                    <h2>Recent Transactions</h2>
                    <div id="transaction-list" class="transaction-list-container card">
                        <p class="no-transactions placeholder-text">Loading transactions...</p>
                        <!-- Transaction items injected here -->
                        <!-- Example Structure (for reference, generated by JS):
                        <div class="transaction-item">
                            <div class="tx-icon tx-send">
                                <span class="material-icons-outlined">arrow_upward</span>
                            </div>
                            <div class="tx-details">
                                <div class="tx-type- Sended">Sent 10.00 USD</div>
                                <div class="tx-counterparty subtle-text">To: 123456789</div>
                                <div class="tx-timestamp subtle-text">Just now</div>
                            </div>
                            <div class="tx-id subtle-text">#AbC1dE...</div>
                        </div>
                         -->
                    </div>
                    <!-- Optionally Add "View All" button later -->
                 </section>

                <section class="content-section user-info-section">
                    <h2>Account Info</h2>
                    <div class="user-info-card card" id="user-info-display">
                        <p class="placeholder-text">Loading user data...</p>
                    </div>
                </section>
            </div>

            <!-- Swap Page -->
            <div id="swap-page" class="page">
                 <header class="page-header">
                    <button class="back-button icon-button" data-target="home-page" aria-label="Back">
                        <span class="material-icons-outlined">arrow_back</span>
                    </button>
                    <h1>Swap Assets</h1>
                    <div class="header-spacer"></div>
                 </header>
                 <section class="content-section swap-section card">
                     <div class="swap-interface">
                         <!-- From -->
                         <div class="swap-box"> /* ... */ </div>
                         <!-- Icon -->
                         <div class="swap-icon-container"> /* ... */ </div>
                         <!-- To -->
                         <div class="swap-box"> /* ... */ </div>
                    </div>
                     <div class="swap-details"> /* Rate & Fee */ </div>
                     <button id="execute-swap-button" class="action-button primary-button" disabled>Swap</button>
                     <p id="swap-status" class="status-message"></p>
                 </section>
            </div>

            <!-- Receive Page -->
            <div id="deposit-page" class="page">
                <header class="page-header"> /* ... Header ... */ </header>
                <section class="content-section card">
                     <p class="info-text">Share your Chat ID below...</p>
                     <div class="deposit-info-card"> /* ... Chat ID Display ... */ </div>
                     <p class="info-text" style="margin-top: 20px;">Received funds...</p>
                </section>
            </div>

            <!-- Send Page -->
            <div id="withdraw-page" class="page">
                <header class="page-header"> /* ... Header ... */ </header>
                 <section class="content-section card">
                     <div class="form-group"> /* Asset Select */ </div>
                     <div class="form-group"> /* Recipient ID Input */ </div>
                     <div class="form-group"> /* Amount Input */ </div>
                     <button id="send-button" class="action-button primary-button" disabled>Send Funds</button>
                     <p id="withdraw-status" class="status-message"></p>
                 </section>
            </div>
        </main>

        <!-- Bottom Navigation Bar -->
        <nav id="bottom-nav"> /* ... Nav Buttons ... */ </nav>

         <!-- Token Selector Modal -->
         <div id="token-selector-modal" class="modal"> /* ... Modal Structure ... */ </div>

    </div> <!-- End #app-container -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <script> /* ... Clipboard init ... */ </script>

</body>
</html>
