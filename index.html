<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AB Wallet</title> <!-- Updated Title -->
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script defer src="firebase.js"></script>
</head>
<body>

    <div id="app-container">
        <!-- Loading Overlay -->
        <div id="loading-overlay">
            <div class="spinner"></div>
            <p>Loading AB Wallet...</p>
        </div>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Home Page -->
            <div id="home-page" class="page active">
                <header class="page-header main-header"> <!-- Added class for potential main header styling -->
                    <h1>AB Wallet</h1> <!-- App Name Header -->
                    <button id="refresh-button" title="Refresh Data">üîÑ</button>
                </header>
                 <section class="content-section total-balance-section">
                    <h2>Total Estimated Value</h2>
                    <div class="total-balance-card">
                        <span class="currency-symbol">$</span>
                        <span class="balance-amount" id="total-balance-display">0.00</span>
                        <span class="currency-code">USD</span>
                    </div>
                 </section>
                 <section class="content-section asset-list-section">
                     <h2>Your Assets</h2>
                     <div id="asset-list" class="asset-list-container">
                         <p class="no-assets">Loading assets...</p>
                     </div>
                 </section>
                <!-- User Info Section Removed from Home - Maybe move to a Profile page later -->
            </div>

            <!-- Swap Page -->
            <div id="swap-page" class="page">
                 <header class="page-header">
                    <button class="back-button" data-target="home-page">‚Üê</button>
                    <h1>Swap Assets</h1>
                 </header>
                 <section class="content-section swap-section">
                     <div class="swap-interface">
                         <!-- From Section -->
                         <div class="swap-box">
                             <label for="swap-from-amount">You Pay</label>
                             <div class="input-group">
                                 <input type="number" id="swap-from-amount" placeholder="0.0" step="any" min="0">
                                 <div class="token-selector-container">
                                     <button class="token-selector-button" id="swap-from-token-button">
                                         <img src="placeholder.png" alt="Token" class="token-logo">
                                         <span class="token-symbol">Select</span>
                                         <span class="arrow">‚ñº</span>
                                     </button>
                                 </div>
                             </div>
                             <div class="balance-info" id="swap-from-balance">Balance: 0.0</div>
                         </div>

                         <div class="swap-icon-container">
                              <button id="swap-switch-button" title="Switch Tokens">‚áÖ</button>
                         </div>

                         <!-- To Section -->
                         <div class="swap-box">
                             <label for="swap-to-amount">You Receive (Estimated)</label>
                             <div class="input-group">
                                 <input type="number" id="swap-to-amount" placeholder="0.0" step="any" disabled>
                                 <div class="token-selector-container">
                                     <button class="token-selector-button" id="swap-to-token-button">
                                          <img src="placeholder.png" alt="Token" class="token-logo">
                                          <span class="token-symbol">Select</span>
                                          <span class="arrow">‚ñº</span>
                                     </button>
                                 </div>
                             </div>
                              <div class="balance-info" id="swap-to-balance">Balance: 0.0</div>
                         </div>

                         <!-- Rate & Action -->
                         <div class="swap-rate-info" id="swap-rate-display">
                             Select tokens to see rate.
                         </div>
                          <div class="swap-fee-info" id="swap-fee-display">
                             <!-- Fee info will be displayed here -->
                         </div>
                         <button id="execute-swap-button" class="action-button primary-button" disabled>Swap</button>
                         <p id="swap-status" class="status-message"></p>
                     </div>
                 </section>
            </div>

            <!-- Deposit Page -->
            <div id="deposit-page" class="page">
                <header class="page-header">
                     <button class="back-button" data-target="home-page">‚Üê</button>
                     <h1>Deposit Information</h1>
                </header>
                <section class="content-section">
                    <p class="info-text">This page shows your unique identifiers within AB Wallet. Deposits are typically handled through external methods or promotions and credited to your account based on these details.</p>

                    <div class="deposit-info-card user-identification-card">
                        <h3>Your AB Wallet Identifiers</h3>
                         <div class="identifier-item">
                             <strong>Chat ID:</strong>
                            <div class="identifier-value">
                               <span id="deposit-chat-id">Loading...</span>
                               <button class="copy-button" title="Copy Chat ID" data-clipboard-target="#deposit-chat-id">COPY</button>
                           </div>
                         </div>
                         <div class="identifier-item">
                              <strong>Username:</strong>
                             <div class="identifier-value">
                                <span id="deposit-username">Loading...</span>
                                <button class="copy-button" title="Copy Username" data-clipboard-target="#deposit-username">COPY</button>
                            </div>
                         </div>
                         <p class="small-text">Use these identifiers when interacting with AB Wallet services or support.</p>
                    </div>

                    <!-- Removed the external wallet address section -->

                    <p class="info-text" style="margin-top: 20px;">There are currently no direct deposit actions within the app itself. Please refer to official AB Wallet channels for deposit instructions.</p>

                     <!-- Optional: Add a button for "How to Deposit?" linking to info -->
                      <!-- <button class="action-button secondary-button">How to Deposit?</button> -->

                </section>
            </div>

            <!-- Withdraw Page -->
            <div id="withdraw-page" class="page">
                <header class="page-header">
                    <button class="back-button" data-target="home-page">‚Üê</button>
                    <h1>Internal Transfer</h1> <!-- Renamed to reflect functionality -->
                </header>
                 <section class="content-section">
                    <p class="info-text">Send assets directly to another AB Wallet user using their Telegram Chat ID or Username.</p>
                     <div class="form-group">
                         <label for="withdraw-asset-select">Select Asset:</label>
                         <select id="withdraw-asset-select">
                             <option value="">-- Select Asset --</option>
                             <!-- Options populated by JS -->
                         </select>
                         <p class="current-balance-info">Available: <strong id="withdraw-available-balance">0.00</strong></p>
                     </div>
                    <div class="form-group">
                        <!-- Changed label and input type -->
                        <label for="withdraw-recipient-id">Recipient's Username or Chat ID:</label>
                        <input type="text" id="withdraw-recipient-id" placeholder="@username or 123456789">
                         <p class="small-text"><small>Enter the exact Telegram Username (without '@') or their numerical Chat ID.</small></p>
                    </div>
                    <div class="form-group">
                        <label for="withdraw-amount">Amount:</label>
                        <div class="input-with-button">
                            <input type="number" id="withdraw-amount" placeholder="0.00" step="any" min="0">
                            <button id="withdraw-max-button">Max</button>
                        </div>
                    </div>
                    <!-- Changed Button Text -->
                    <button id="withdraw-button" class="action-button primary-button" disabled>Send Transfer</button>
                    <p id="withdraw-status" class="status-message"></p>
                 </section>
            </div>
        </main>

        <!-- Bottom Navigation Bar -->
        <nav id="bottom-nav">
            <!-- ... (nav buttons remain the same) ... -->
             <button data-page="home-page" class="nav-button active" aria-label="Home">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
                <span>Home</span>
            </button>
            <button data-page="swap-page" class="nav-button" aria-label="Swap">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"></path></svg>
                <span>Swap</span>
            </button>
            <button data-page="deposit-page" class="nav-button" aria-label="Deposit">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 12v7H5v-7H3v9h18v-9h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"></path></svg>
                <span>Deposit</span>
            </button>
            <button data-page="withdraw-page" class="nav-button" aria-label="Withdraw">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.33 5.67L7.41 9.59 6 8.17l5-5 5 5-1.41 1.42-3.92-3.92V16h-2V5.67zM5 18h14v-3H5v3z"></path></svg> <!-- Changed Icon maybe? -->
                <span>Transfer</span> <!-- Changed Label -->
            </button>
        </nav>

         <!-- Token Selector Modal (Structure remains the same) -->
         <div id="token-selector-modal" class="modal">
             <!-- ... (modal content remains the same) ... -->
             <div class="modal-content">
                 <div class="modal-header">
                     <h2>Select Token</h2>
                     <button class="close-modal-button">√ó</button>
                 </div>
                 <div class="modal-body">
                     <input type="text" id="token-search-input" placeholder="Search token name or symbol...">
                     <ul id="token-list-modal"></ul>
                 </div>
             </div>
         </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <script>
        // Initialize ClipboardJS (remains the same)
        if (typeof ClipboardJS === 'function') {
            var clipboard = new ClipboardJS('.copy-button');
            clipboard.on('success', function(e) { /* ... feedback ... */ });
            clipboard.on('error', function(e) { /* ... feedback ... */ });
        }
    </script>

</body>
</html>
